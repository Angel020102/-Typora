## 来搞作用域和作用域链

1. ####  javaScript 中的作用域

   - JavaScript 有两种作用域：

     1. 全局作用域

        - 全局作用域中定义的变量可以被任何地方的访问

     2. 局部作用域

        - 局部作用域内的变量只能被定义它的局部作用域访问

        - 作用域是分层的，内部函数可以访问外部函数作用域里的变量，反之是不可以的 （作用域链）

        - 块语句中的  （｛｝内的语句）if   while 不会创建新的作用域

          1. 函数作用域

             - 函数作用域中的变量和函数只能由函数内部访问

               ```js
               function foo(){
                   var localVar = 'local'
                   function localFunc () {
                       console.log(local)
                   }
                   localVar()
               }
               localFunc()
               ```

               

               ```js
               function foo() {
               	var locallnnerVar = 'locallnner'
               	function localFunc() {
                   	console.log(local)
               }
                   localFunc()
               }
               ```

               

          2. 块级作用域

             - let 和 const  两种声明变量的命令，所有的变量只能在指定块的作用域内被访问

             - 不会变量提升

               ```js
               console.log(b)
               console.log(a)
               let a = '章北海'
               var a = '程心'
               ```

             - 不允许重复声明

               ```js
               console.log(a)
               var a = '川端康成'
               let a = '雪国'
               ```

2. 作用域链

   - 多个作用域对象连续引用形成的链式结构

   - 变量的查找是沿着作用域链实现的，所以也叫变量的查找机制

   - 在使用一个变量的时候，首页JavaScript引擎会在当前的作用域下寻找该变量，如果没有找到，再到它上一层的作用域寻找，以此类推直到找到或者到达全局作用域，在全局作用域还找不到该变量，它就会报错。

     ```js
     var a = 100
     function fun() {
         var b = 200
         console.log(a) // 100
         console.log(b) // 200
     }
     fun()
     
     ```

     ```js
     var a = 10
     function fun(){
         console.log(a)
     }
     function show(f){
         var a = 20
         (function(){
             f() // 10 函数作用域在函数定义的时候就被决定了，与函数在哪里被调用无关
         })()
     }
     show(fun)
     ```

3. 作用域的作用

   - 安全  变量只能在特定的区域内才能被访问，外部环境不能访问内部环境的变量和函数，即可以向上搜索，但是不能向下搜索。避免在其他位置对变量做出修改
   - 作用域能减轻命名的压力，我们可以在不同的作用域内定义相同的变量名，且变量名不会产生冲突

4. 来上一嘴

   - 作用域分为全局作用域和局部作用域，全局作用域中的变量可以被任何地方访问到。局部作用域又分为函数作用域和块级作用域，函数作用域下的变量和函数只能在函数内部访问，块级作用域是ES6后提到的，任何一对花括号都可以被称之为快级作用域。let const 。作用域链是多个作用域连续引用产生的，作用域的底层原理就是变量的查找机制。当查找一个变量时候，js引擎会先从当前的作用域查找，如果没有就会在上一层作用域查找。以此类推，直到查找到全局作用域，全局作用域也没有的话，就会报错。

